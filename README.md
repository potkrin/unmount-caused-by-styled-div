## styled('div') の子要素内でタブ切り替えを実行するとタブ子要素がアンマウントされる問題
- タブ切り替えを行うと、タブ子要素がアンマウントされタブ子要素の state がリセットされてしまうという問題
- 一つのタブ内で重い処理とその中間出力表示を行う予定なので、中間出力を管理している state が消えると致命的

#### おしえて ChatGPT-4 先生！
ChatGPT 4

> コード内でstyledコンポーネント（AppDiv）を使用するとタブ切替時にアンマウントが発生する理由は、AppDivコンポーネントがApp関数コンポーネント内で定義されているためです。この配置により、Appコンポーネントの状態（この場合はタブの状態）が変更されるたびに、Appコンポーネントが再レンダリングされます。そして、AppDivも再作成され、新しいインスタンスとして扱われます。
>
> Reactでは、コンポーネントのインスタンスが変わると、そのコンポーネント内の子要素も新しいものとして扱われます。これにより、子要素はアンマウントされ、新しいインスタンスがマウントされます。そのため、TabChildコンポーネントもアンマウントされ、新しいインスタンスがマウントされます。
> 
> 一方、\<div>要素の場合、これはプリミティブなHTML要素であり、再レンダリング時に新しいインスタンスが生成されることはありません。従って、\<div>を使用する場合、子要素は不要にアンマウントされることはありません。
> 
> この問題を解決するためには、AppDivコンポーネントをAppコンポーネントの外に移動させることが効果的です。これにより、AppDivはアプリケーションのライフサイクルにわたって一貫したインスタンスを保持し、その子要素の不必要なアンマウントを防ぐことができます。


アンマウントで消えてほしくない state は親コンポーネントで定義して ContextAPI 経由で子・孫コンポーネントに渡したほうが安定かも

再現手順
```sh
git clone git@github.com:potkrin/unmount-caused-by-styled-div.git
cd unmount-caused-by-styled-div

# npm を導入しておいてください
# $ npm --version
#   6.14.15

npm install
npm start
# ブラウザで http://localhost:3000/ 等にアクセス
# devtools のコンソールを開いた状態でタブを切り替える
```
